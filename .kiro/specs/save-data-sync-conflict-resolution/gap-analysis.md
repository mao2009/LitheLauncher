# Gap Analysis: save-data-sync-conflict-resolution

## 1. 迴ｾ迥ｶ縺ｮ隱ｿ譟ｻ (Current State Investigation)

### 荳ｻ隕√Δ繧ｸ繝･繝ｼ繝ｫ縺ｨ讒矩
- **`src/launcher_service.py`**: 繧ｲ繝ｼ繝縺ｮ襍ｷ蜍輔ヵ繝ｭ繝ｼ縺ｨ繧ｻ繝ｼ繝悶ョ繝ｼ繧ｿ縺ｮ蜷梧悄繝ｭ繧ｸ繝・け (`sync_save_data`) 繧堤ｮ｡逅・＠縺ｦ縺・∪縺吶・- **`src/remote_storage_service.py`**: 繝ｪ繝｢繝ｼ繝医せ繝医Ξ繝ｼ繧ｸ縺ｨ縺ｮ螳滄圀縺ｮ繧｢繝・・繝ｭ繝ｼ繝・繝繧ｦ繝ｳ繝ｭ繝ｼ繝峨♀繧医・繧ｿ繧､繝繧ｹ繧ｿ繝ｳ繝怜叙蠕・(`get_latest_mtime`) 繧呈球蠖薙＠縺ｦ縺・∪縺吶・- **`src/main_window.py`**: UI縺ｮ繝｡繧､繝ｳ繧ｦ繧｣繝ｳ繝峨え縺ｧ縺ゅｊ縲√お繝ｩ繝ｼ騾夂衍縺ｪ縺ｩ繧呈球蠖薙＠縺ｦ縺・∪縺吶・
### 譌｢蟄倥・蜷梧悄繝ｭ繧ｸ繝・け
- 迴ｾ蝨ｨ縺ｮ `LauncherService.sync_save_data` 縺ｮ `smart` 繝｢繝ｼ繝峨〒縺ｯ縲∽ｻ･荳九・蜃ｦ逅・′陦後ｏ繧後※縺・∪縺呻ｼ・  - 繝ｭ繝ｼ繧ｫ繝ｫ縺ｨ繝ｪ繝｢繝ｼ繝医・譛邨よ峩譁ｰ譌･譎ゅｒ豈碑ｼ・・  - **譛ｪ譚･縺ｮ繧ｿ繧､繝繧ｹ繧ｿ繝ｳ繝・*縺梧､懃衍縺輔ｌ縺溷ｴ蜷医・縺ｿ `_show_sync_conflict_dialog` 繧貞他縺ｳ蜃ｺ縺励※繝ｦ繝ｼ繧ｶ繝ｼ縺ｫ遒ｺ隱阪・  - 縺昴ｌ莉･螟悶・蝣ｴ蜷医∝腰邏斐↓縲梧眠縺励＞譁ｹ縲阪ｒ驕ｸ謚槭＠縺ｦ閾ｪ蜍慕噪縺ｫ蜷梧悄・医Μ繝｢繝ｼ繝医′譁ｰ縺励￠繧後・繝繧ｦ繝ｳ繝ｭ繝ｼ繝峨√Ο繝ｼ繧ｫ繝ｫ縺梧眠縺励￠繧後・繧｢繝・・繝ｭ繝ｼ繝会ｼ峨・
### 邨ｱ蜷医・繧､繝ｳ繝・- `LauncherService.sync_save_data` 蜀・・ `smart` 蜷梧悄繝ｭ繧ｸ繝・け縺ｮ譚｡莉ｶ蛻・ｲ舌・- `LauncherService._show_sync_conflict_dialog` (譌｢蟄倥・繝繧､繧｢繝ｭ繧ｰ螳溯｣・縲・
## 2. 隕∽ｻｶ縺ｮ螳溽樟蜿ｯ閭ｽ諤ｧ蛻・梵 (Requirements Feasibility Analysis)

| 隕∽ｻｶ | 蟇ｾ蠢懊☆繧玖ｳ・肇 | 繧ｹ繝・・繧ｿ繧ｹ | 繧ｮ繝｣繝・・ / 蛻ｶ邏・|
| :--- | :--- | :--- | :--- |
| **1. 遶ｶ蜷育憾諷九・讀懃衍** | `LauncherService.sync_save_data` | **Partial** | 迴ｾ蝨ｨ縺ｯ縲後Ο繝ｼ繧ｫ繝ｫ縺梧眠縺励＞縲榊ｴ蜷医↓閾ｪ蜍輔い繝・・繝ｭ繝ｼ繝峨＆繧後ｋ縺後√％繧後ｒ縲檎ｫｶ蜷医阪→縺励※繝槭・繧ｯ縺礼｢ｺ隱阪′蠢・ｦ√・|
| **2. 繝ｦ繝ｼ繧ｶ繝ｼ縺ｸ縺ｮ遒ｺ隱・* | `_show_sync_conflict_dialog` | **Partial** | 譌｢蟄倥ム繧､繧｢繝ｭ繧ｰ縺ｯ縺ゅｋ縺後∵悴譚･縺ｮ繧ｿ繧､繝繧ｹ繧ｿ繝ｳ繝玲凾縺ｮ縺ｿ縲ゅΟ繝ｼ繧ｫ繝ｫ縺梧眠縺励＞蝣ｴ蜷医↓繧る←逕ｨ縺吶ｋ蠢・ｦ√′縺ゅｋ縲・|
| **3. 蜷梧悄蜃ｦ逅・・螳溯｡・* | `sync_save_data`, `RemoteStorageService` | **Matched** | 繧｢繝・・繝ｭ繝ｼ繝・繝繧ｦ繝ｳ繝ｭ繝ｼ繝峨・蝓ｺ逶､繝ｭ繧ｸ繝・け縺ｯ譌｢縺ｫ蟄伜惠縲・|
| **4. 繧ｨ繝ｩ繝ｼ譎ゅ・襍ｷ蜍穂ｸｭ譁ｭ** | `launcher_service.py` | **Matched** | `SaveDataSyncError` 繧帝∝・縺吶ｋ縺薙→縺ｧ襍ｷ蜍輔ｒ荳ｭ譁ｭ縺吶ｋ莉慕ｵ・∩縺梧里縺ｫ蟄伜惠縲・|

### 隍・尅諤ｧ縺ｨ繝ｪ繧ｹ繧ｯ
- **隍・尅諤ｧ (S)**: 譌｢蟄倥・繝ｭ繧ｸ繝・け縺ｫ譚｡莉ｶ蛻・ｲ舌ｒ霑ｽ蜉縺励√ム繧､繧｢繝ｭ繧ｰ縺ｮ蜻ｼ縺ｳ蜃ｺ縺玲擅莉ｶ繧呈僑蠑ｵ縺吶ｋ縺縺代↑縺ｮ縺ｧ縲∝ｮ溯｣・・髱槫ｸｸ縺ｫ繧ｷ繝ｳ繝励Ν縺ｧ縺吶・- **繝ｪ繧ｹ繧ｯ (Low)**: 譌｢縺ｫ蜍穂ｽ懊＠縺ｦ縺・ｋ蜷梧悄繧ｨ繝ｳ繧ｸ繝ｳ縺ｮ荳翫↓讒狗ｯ峨☆繧九◆繧√√Μ繧ｹ繧ｯ縺ｯ菴弱＞縺ｧ縺吶ゅ◆縺縺励∬・蜍募酔譛溘↓諷｣繧後※縺・ｋ繝ｦ繝ｼ繧ｶ繝ｼ縺ｫ縺ｨ縺｣縺ｦ縲梧ｯ主屓遒ｺ隱阪′蜃ｺ繧九阪％縺ｨ縺檎・繧上＠縺上↑縺・°縺ｮ讀懆ｨ弱′蠢・ｦ√〒縺吶・
## 3. 螳溯｣・い繝励Ο繝ｼ繝√・讀懆ｨ・(Implementation Approach Options)

### Option A: 譌｢蟄倥さ繝ｳ繝昴・繝阪Φ繝医・諡｡蠑ｵ (謗ｨ螂ｨ)
- **蜀・ｮｹ**: `LauncherService.sync_save_data` 縺ｮ `smart` 繝｢繝ｼ繝牙・縺ｮ `if remote_mtime > local_mtime` 遲峨・譚｡莉ｶ蛻・ｲ舌ｒ菫ｮ豁｣縺励～local_mtime > remote_mtime` 縺ｮ髫帙↓繧・`_show_sync_conflict_dialog` 繧貞他縺ｳ蜃ｺ縺吶ｈ縺・↓螟画峩縺励∪縺吶・- **繝｡繝ｪ繝・ヨ**: 譛蟆城剞縺ｮ螟画峩縺ｧ貂医∩縲∵里蟄倥・繝・せ繝医ｂ豬∫畑蜿ｯ閭ｽ縺ｧ縺吶・- **繝・Γ繝ｪ繝・ヨ**: `sync_save_data` 繝｡繧ｽ繝・ラ縺後＆繧峨↓閧･螟ｧ蛹悶☆繧句庄閭ｽ諤ｧ縺後≠繧翫∪縺吶′縲∬ｨｱ螳ｹ遽・峇蜀・〒縺吶・
### Option B: 蜷梧悄繝昴Μ繧ｷ繝ｼ縺ｮ蛻・屬
- **蜀・ｮｹ**: 蜷梧悄蛻､螳壹Ο繧ｸ繝・け繧貞挨縺ｮ繧ｯ繝ｩ繧ｹ繧・Γ繧ｽ繝・ラ・井ｾ具ｼ啻SyncPolicyEngine`・峨↓蛻・屬縺励∝愛螳夂ｵ先棡・・OWNLOAD, UPLOAD, ASK_USER, SKIP・峨ｒ霑斐☆繧医≧縺ｫ縺励∪縺吶・- **繝｡繝ｪ繝・ヨ**: 蛻､螳壹Ο繧ｸ繝・け縺後ユ繧ｹ繝医＠繧・☆縺上↑繧翫∝ｰ・擂逧・↓縲悟ｸｸ縺ｫ繧｢繝・・繝ｭ繝ｼ繝峨☆繧九阪↑縺ｩ縺ｮ險ｭ螳壹ｒ霑ｽ蜉縺励ｄ縺吶￥縺ｪ繧翫∪縺吶・- **繝・Γ繝ｪ繝・ヨ**: 莉雁屓縺ｮ蟆剰ｦ乗ｨ｡縺ｪ螟画峩縺ｫ蟇ｾ縺励※縺ｯ繧ｪ繝ｼ繝舌・繧ｨ繝ｳ繧ｸ繝九い繝ｪ繝ｳ繧ｰ豌怜袖縺ｧ縺吶・
## 4. 謗ｨ螂ｨ莠矩・→險ｭ險医ヵ繧ｧ繝ｼ繧ｺ縺ｸ縺ｮ隱ｲ鬘・
### 謗ｨ螂ｨ繧｢繝励Ο繝ｼ繝・- **Option A** 繧呈治逕ｨ縺励∵里蟄倥・ `_show_sync_conflict_dialog` 繧定ｦ∽ｻｶ縺ｫ蜷医ｏ縺帙※蠕ｮ隱ｿ謨ｴ・域枚險縺ｮ謨ｴ逅・↑縺ｩ・峨☆繧九・縺梧怙繧ょ柑邇・噪縺ｧ縺吶・
### 隱ｿ譟ｻ縺悟ｿ・ｦ√↑莠矩・(Research Needed)
- **繝・せ繝郁・蜍募喧**: `QMessageBox` 繧剃ｼｴ縺・酔譛溘Ο繧ｸ繝・け縺ｮ邨ｱ蜷医ユ繧ｹ繝医′ `tests/test_launcher_service.py` 縺ｪ縺ｩ縺ｧ縺ｩ縺ｮ繧医≧縺ｫ繝｢繝・け縺輔ｌ縺ｦ縺・ｋ縺九ｒ遒ｺ隱阪＠縲∵眠縺励＞遒ｺ隱阪ヵ繝ｭ繝ｼ繧偵ユ繧ｹ繝医〒縺阪ｋ繧医≧縺ｫ縺吶ｋ蠢・ｦ√′縺ゅｊ縺ｾ縺吶・- **i18n**: 譁ｰ縺励＞繝繧､繧｢繝ｭ繧ｰ譁・ｨ繧・・繧ｿ繝ｳ縺ｮ鄙ｻ險ｳ・・.ts` 繝輔ぃ繧､繝ｫ縺ｸ縺ｮ霑ｽ蜉・峨′蠢・ｦ√〒縺吶・
